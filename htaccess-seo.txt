# DocSpace.uk SEO-Friendly URL Routing
RewriteEngine On

# Redirect old hash URLs to new clean URLs
RewriteCond %{QUERY_STRING} ^$
RewriteCond %{REQUEST_URI} ^/$
RewriteCond %{HTTP_REFERER} #company/(.+)$
RewriteRule ^(.*)$ /company/%1? [R=301,L]

# Handle company URLs
RewriteRule ^company/([a-zA-Z0-9]+)/?$ /index.html?company=$1 [L,QSA]

# Handle industry pages
RewriteRule ^industries/([a-zA-Z0-9-]+)/?$ /index.html?industry=$1 [L,QSA]

# Handle location pages  
RewriteRule ^companies/([a-zA-Z0-9-]+)/?$ /index.html?location=$1 [L,QSA]

# Handle special categories
RewriteRule ^oldest-companies/?$ /index.html?category=oldest [L,QSA]
RewriteRule ^newest-companies/?$ /index.html?category=newest [L,QSA]
RewriteRule ^royal-charter-companies/?$ /index.html?category=royal-charter [L,QSA]
RewriteRule ^plc-companies/?$ /index.html?category=plc [L,QSA]

# Security headers
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
Header always set X-XSS-Protection "1; mode=block"
Header always set Referrer-Policy "strict-origin-when-cross-origin"

# Cache control
<FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg)$">
    ExpiresActive On
    ExpiresDefault "access plus 1 month"
</FilesMatch>

# Compress content
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>