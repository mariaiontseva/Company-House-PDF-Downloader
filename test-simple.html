<!DOCTYPE html>
<html>
<head>
    <title>Simple Modal Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #0f172a; color: white; }
        .modal { display: none; position: fixed; top: 50px; left: 50px; background: #1e293b; padding: 20px; border-radius: 8px; width: 500px; }
        .show { display: block !important; }
        button { background: #3b82f6; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 10px; }
        .tab-content { margin-top: 20px; }
        .data-item { background: #334155; padding: 10px; margin: 5px 0; border-radius: 4px; }
        .data-item-header { font-weight: bold; margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>Simple Modal Test</h1>
    <button onclick="showTestModal()">Show Modal with Address</button>
    
    <div id="testModal" class="modal">
        <h3>Company Overview</h3>
        <div id="overview">
            <p>Loading...</p>
        </div>
        <button onclick="hideModal()">Close</button>
    </div>
    
    <script>
        // Test company data
        const testCompany = {
            address: {
                line1: "128 CITY ROAD",
                postTown: "LONDON", 
                postCode: "EC1V 2NX",
                country: "ENGLAND"
            }
        };
        
        function formatAddress(address) {
            if (!address) return 'Address not available';
            
            const parts = [];
            if (address.line1) parts.push(address.line1);
            if (address.line2) parts.push(address.line2);
            if (address.postTown) parts.push(address.postTown);
            if (address.county) parts.push(address.county);
            if (address.country) parts.push(address.country);
            if (address.postCode) parts.push(address.postCode);
            
            return parts.filter(part => part && part !== 'null').join(', ');
        }
        
        function populateOverview(companyData) {
            console.log('populateOverview called with:', companyData);
            
            const overviewTab = document.querySelector('#overview');
            if (!overviewTab) {
                console.error('Overview tab not found!');
                return;
            }
            
            const address = formatAddress(companyData.registered_office_address);
            console.log('Formatted address:', address);
            
            overviewTab.innerHTML = `
                <div class="data-item">
                    <div class="data-item-header">Registered Address</div>
                    <div class="data-item-detail">${address}</div>
                </div>
                <div class="data-item">
                    <div class="data-item-header">Company Type</div>
                    <div class="data-item-detail">Private Limited Company</div>
                </div>
            `;
        }
        
        function showTestModal() {
            document.getElementById('testModal').classList.add('show');
            
            // Simulate the data structure
            const modalData = {
                registered_office_address: testCompany.address
            };
            
            populateOverview(modalData);
        }
        
        function hideModal() {
            document.getElementById('testModal').classList.remove('show');
        }
    </script>
</body>
</html>